# MESCADAS 프로젝트(MSD)의 생산라인 PLC 래더 다이어그램

### ⚠️git 커밋 및 체크아웃 주의사항
git checkout 으로 PLC 래더다이어그램 프로젝트파일 `생산PLC.gx3`을 변경하려 할 때,  GX Works 3 등 다른 프로그램에서 열려있으면 git이 동작하지 않음. git checkout 전에 반드시 PLC 프로그램에서 프로젝트를 닫을 것.

## 운전

* 운전시작
  * PLC 입력카드 접점(실물버튼 제어):
    * X20(버튼 PB1 연결): 운전시작
    * X21: 운전정지
  * 메모리 입력접점 (Modbus 제어)
    * M10: 운전시작
    * M11: 운전정지
  * 에뮬레이팅 모드 (Modbus 제어)
    * M12: 에뮬레이팅 모드 전환

* 컨베어벨트 : Y40
  > 운전시작시 컨베어벨트 동작

### 센서 모드 (디폴트)
실제 컨베어벨트 센서인식에따라 공정상태(D1)와 누적생산량(D2)이 변화

### 에뮬레이팅 모드 (자동)
M12를 ON 한상태에서 운전시작하면 자동 에뮬레이팅 모드가 시작되어 실제 센서인식과 무관하게 자동으로 공정상태(D1)가 대기-주입-성형-취출 단계를 반복하면서 누적생산량(D2)이 증분됨.

> M12는 C#코드에서 제어.
  
## 실시간 모니터링

####  PLC 메모리:

* D2의 값 (누적생산량)
  * 운전 중 취출 단계 때마다 1씩 증가

* D1의 값 (공정 단계)
  * 0: 대기 - 주입 전/취출 완료 후
  * 1: 주입(투입) - 센서1 ~ 센서2 구간
  * 2: 성형 - 센서2 ~ 센서3 구간
  * 3: 취출 - 센서3가 On 되고 잠시 후 까지.


#### 공정단계 표시 LAMP:
* Y41/42/43 모두 OFF: 대기상태
* Y41 ON: 주입공정
* Y42 ON: 성형공정
* Y43 ON: 취출공정




##  PLC 다이어그램

 `생산PLC.gx3` - GX Works 3 파일.

> PLC: 미쯔비스 PLC R 시리즈

전체요약:
![PLC 다이어그램 전체 요약](./doc/img/1-1수동모드%20전체%20다이어그램%20코멘트%20없음.png)

코멘트 포함:
![PLC 다이어그램 전체 코멘트 포함](./doc/img/1-2수동모드%20전체%20다이어그램%20코멘트포함.png)